# Тестовое задание

<h3>Использованные технологии:</h3>
<ul>
<li>Java 8</li>
<li>Gradle</li>
<li>Selenide</li>
<li>TestNG</li>
<li>SLF4J</li>
<li>Hamcrest</li>
</ul>

<h3>Шаги теста</h3>
<ul>
<li>Перейти на amazon.co.uk и авторизоваться.</li>
<li>Осуществить поиск по строке "iphone 7 128gb".</li>
<li>Выбрать самое дешевое предложение и перейти на страницу модели.</li>
<li>Товар должен быть добавлен в корзину.</li>
<li>Перейти на страницу редактирования корзины.</li>
<li>Проверить наличие, затем товар должен быть удален из корзины.</li>
<li>Выйти из аккаунта.</li>
</ul>
<h3>Описание проекта</h3>

Тест <b>(src\test\java\MainTest.java)</b> был написан с использованием Selenide и Page Object pattern <b>(src\main\java\pages)</b>.
Пакет <b>(src\main\java\drivers)</b> содержит <b>ChromeWebDriverInstance.class</b> который содержит статический <b>getLocalDriver()</b> метод и обеспечивает возможностью запуска тестов.</br>
<b>Важная информация</b> - тестирование проводилось на Windows в Chrome. (Хотя в <b>getLocalDriver()</b> реализована возможность запуска тестов под Mac OS, однако, она не проверена).</br>

Драйвера находятсся в <b>(src\main\resources\drivers)</b>.
Также, были созданы пользовательские исключения <b>(src\main\java\exceptions)</b>.

Пакет (<b>src\main\java\utils</b>) содержит: PropertiesLoader.java - класс, который включает в себя метод loadProperty(String propertyName) позволяющий загружать properties из property-файла.

<b>src\main\resources\test.properties</b> - файл который содержит урл, пароль, имя пользователя и другие постоянные данные необходимые для теста.

<h3>Запуск тестов локально:</h3>

Откройте терминал и наберите в коммандной строке следующие комманды:

<code>git clone https://github.com/Eduard-Za/testing-task.git</code></br>
<code>cd testing-task</code></br>
<code>gradle cleanTest test</code>



# Дополнения

<b>JUnit</b> был заменен на <b>TestNG</b> - так как он удобнее для задач распараллеливания, созданиия listener-ов.

<ul>
<li>1. Предусмотреть возможность параллельного запуска (учесть, что тест может быть одним из многих).</br>
<p>Сейчас реализована возможность парралельного запуска тестов. Я выставил <b>maxParallelForks = 2</b>.</br>
Для проверки возможности параллельного запуска тестов был создан метод <b>secondToEnsureParralel()</b>, который 
содержит в себе метод Thread.sleep(3000) - второй браузер откроется на несколько секунд.</p>
<p>Также тесты поделены на две группы "correct" и "incorrect".</p></br>
<p>Для того, чтобы запустить 2 теста параллельно используйте: <code>gradle clean test</code>; </br>
<p>Для того, чтобы запустить один тест с меткой "correct" используйте: <code>gradle correctTest</code>;
</li>


<li>2. Предусмотреть, что amazon может группировать товары с одинаковой ценой и выводить как один товар в результатах поиска.
<p>Описание: если товар имеет ссылку на список цен, то происходит переход на страницу с ценами, сортировка и выбор самого дешевого предложения - <b>метод addTheCheapestToTheBascet().</b></p></li>
<p>Также присутствует вариант выбора дефолтной цены через добавление товара в корзину напрямую или
через окно с дополнительной гарнитурой (сейчас не востребовано, но для других товаров на amazon может понадобиться).</p>

<li>3. Добавить проверку правильности сортировки по цене.</br>
<p>Была добавлена проверка правильности сортировки по цене на странице. Для этого используется метод <b>checkSorting().</b></br>
<p>Он возвращает булевое true, если сортировка верна.</p></br>
<i>Примечание:</i> в качестве assert для этой проверки использовался org.testng.asserts.SoftAssert, для продолжения хода теста,</br>
так как сортировка была в некоторый момент некорректна на странице(см. screenshot-ы ниже).</li></br>



<li>4. В корзину должен быть добавлен только - Iphone 7 128gb.
<p>Выбирается самый дешевый Iphone 7 128gb.
Для этого используется метод <b>getTheCheapestIphone();</b></p></li></br>

<li>5. Должна быть добавлена только одна единица товара.
<p>Добавлена проверка того, что в корзине только одна единица товара.</p> 
<b>checkThatOnlyOneProductInBasket()</b> - метод возвращает true если количество продуктов в корзине = 1.
<p>Также был добавлен <b>ListenerFailed()</b> - это TestNG listener, который запускает метод 
<b>deleteProductsIfPresentIfTestFailed(),</b> который удаляет продукты в случае неудачного теста. Благодаря всем этим мерам, больше одного продукта в корзине не наблюдается.</p></li>
</ul>

<h3>Screenshots - сортировка</h3>

![alt](https://github.com/Eduard-Za/testing-task/blob/master/src/main/resources/images/Untitled1.png)
![alt](https://github.com/Eduard-Za/testing-task/blob/master/src/main/resources/images/Untitled2.png)
